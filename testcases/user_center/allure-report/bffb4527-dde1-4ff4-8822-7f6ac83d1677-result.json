{"name": "注册账号", "status": "broken", "statusDetails": {"message": "pymysql.err.ProgrammingError: (1064, \"You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'desc order by id desc limit 1' at line 1\")", "trace": "self = <testcases.user_center.test_user.TestUser object at 0x000001D8A905B7C0>\ndriver = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"289dd532e32dca526dbbdc0050658d05\")>\n\n    @allure.title('注册账号')\n    def test_register(self, driver):\n        page = UserPage(driver)\n        data = read_yaml()['register_ok']\n        with allure.step('Click register botton'):\n            page.click(page.btn_register)\n    \n        with allure.step('Input username'):\n            page.send_keys(page.input_phone, data['mobile'])\n    \n        with allure.step('Fetch authentication code'):\n            page.click(page.btn_code)\n    \n        with allure.step('获取验证码'):\n            # sql = f\"SELECT code FROM users_verifycode WHERE mobile ={str(data['mobile'])} ORDER BY id LIMITI 1\"\n            mobile = str(data['mobile'])\n            sql = f\"select code from users_verifycode where mobile = {mobile} desc order by id desc limit 1;\"\n>           code = db.select_db_one(sql)['code']\n\ntest_user.py:69: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n..\\..\\utils\\mysql_util.py:25: in select_db_one\n    self.cur.execute(query=sql)\n..\\..\\venv\\lib\\site-packages\\pymysql\\cursors.py:153: in execute\n    result = self._query(query)\n..\\..\\venv\\lib\\site-packages\\pymysql\\cursors.py:322: in _query\n    conn.query(q)\n..\\..\\venv\\lib\\site-packages\\pymysql\\connections.py:558: in query\n    self._affected_rows = self._read_query_result(unbuffered=unbuffered)\n..\\..\\venv\\lib\\site-packages\\pymysql\\connections.py:822: in _read_query_result\n    result.read()\n..\\..\\venv\\lib\\site-packages\\pymysql\\connections.py:1200: in read\n    first_packet = self.connection._read_packet()\n..\\..\\venv\\lib\\site-packages\\pymysql\\connections.py:772: in _read_packet\n    packet.raise_for_error()\n..\\..\\venv\\lib\\site-packages\\pymysql\\protocol.py:221: in raise_for_error\n    err.raise_mysql_exception(self._data)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ndata = b\"\\xff(\\x04#42000You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'desc order by id desc limit 1' at line 1\"\n\n    def raise_mysql_exception(data):\n        errno = struct.unpack(\"<h\", data[1:3])[0]\n        errval = data[9:].decode(\"utf-8\", \"replace\")\n        errorclass = error_map.get(errno)\n        if errorclass is None:\n            errorclass = InternalError if errno < 1000 else OperationalError\n>       raise errorclass(errno, errval)\nE       pymysql.err.ProgrammingError: (1064, \"You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'desc order by id desc limit 1' at line 1\")\n\n..\\..\\venv\\lib\\site-packages\\pymysql\\err.py:143: ProgrammingError"}, "steps": [{"name": "Click register botton", "status": "passed", "start": 1691916591901, "stop": 1691916591970}, {"name": "Input username", "status": "passed", "start": 1691916591970, "stop": 1691916592047}, {"name": "Fetch authentication code", "status": "passed", "start": 1691916592047, "stop": 1691916592092}, {"name": "获取验证码", "status": "broken", "statusDetails": {"message": "pymysql.err.ProgrammingError: (1064, \"You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'desc order by id desc limit 1' at line 1\")\n", "trace": "  File \"D:\\Career\\Practice\\Project\\testcases\\user_center\\test_user.py\", line 69, in test_register\n    code = db.select_db_one(sql)['code']\n  File \"D:\\Career\\Practice\\Project\\utils\\mysql_util.py\", line 25, in select_db_one\n    self.cur.execute(query=sql)\n  File \"D:\\Career\\Practice\\Project\\venv\\lib\\site-packages\\pymysql\\cursors.py\", line 153, in execute\n    result = self._query(query)\n  File \"D:\\Career\\Practice\\Project\\venv\\lib\\site-packages\\pymysql\\cursors.py\", line 322, in _query\n    conn.query(q)\n  File \"D:\\Career\\Practice\\Project\\venv\\lib\\site-packages\\pymysql\\connections.py\", line 558, in query\n    self._affected_rows = self._read_query_result(unbuffered=unbuffered)\n  File \"D:\\Career\\Practice\\Project\\venv\\lib\\site-packages\\pymysql\\connections.py\", line 822, in _read_query_result\n    result.read()\n  File \"D:\\Career\\Practice\\Project\\venv\\lib\\site-packages\\pymysql\\connections.py\", line 1200, in read\n    first_packet = self.connection._read_packet()\n  File \"D:\\Career\\Practice\\Project\\venv\\lib\\site-packages\\pymysql\\connections.py\", line 772, in _read_packet\n    packet.raise_for_error()\n  File \"D:\\Career\\Practice\\Project\\venv\\lib\\site-packages\\pymysql\\protocol.py\", line 221, in raise_for_error\n    err.raise_mysql_exception(self._data)\n  File \"D:\\Career\\Practice\\Project\\venv\\lib\\site-packages\\pymysql\\err.py\", line 143, in raise_mysql_exception\n    raise errorclass(errno, errval)\n"}, "start": 1691916592092, "stop": 1691916592147}], "attachments": [{"name": "log", "source": "162c56a8-b65e-494c-a31a-f113d01a69e8-attachment.txt", "type": "text/plain"}], "start": 1691916591900, "stop": 1691916592148, "uuid": "2d97b88b-267e-46cc-b2b6-2ba94b5c80ee", "historyId": "0b0e5f75fbb82d51ff445c0a076c28f1", "testCaseId": "0b0e5f75fbb82d51ff445c0a076c28f1", "fullName": "testcases.user_center.test_user.TestUser#test_register", "labels": [{"name": "feature", "value": "Module: User"}, {"name": "epic", "value": "Project: Meike Market"}, {"name": "parentSuite", "value": "testcases.user_center"}, {"name": "suite", "value": "test_user"}, {"name": "subSuite", "value": "TestUser"}, {"name": "host", "value": "Ted"}, {"name": "thread", "value": "15724-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "testcases.user_center.test_user"}]}